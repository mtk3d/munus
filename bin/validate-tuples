#!/usr/bin/env php
<?php

declare(strict_types=1);

require __DIR__.'/../vendor/autoload.php';

use Munus\Generators\Tuple\TupleGeneratorConfiguration;
use Munus\Generators\Tuple\ValidationClassPersister;
use Munus\Tuple;

$validator = new ValidationClassPersister(TupleGeneratorConfiguration::DEFAULT_SOURCE_PATH);
$tupleGenerator = TupleGeneratorConfiguration::getTupleGenerator($validator);
$tupleGenerator->generateTuples(Tuple::TUPLE_MAX_SIZE);

if ($validator->foundDiff()) {
    error_log('Error. Differences between exising and generated Tuples found.');
    error_log('Please run generate-tuples script and try again.');
    exit(1);
}

print_r('Success. No differences found.'.PHP_EOL);
exit(0);
